<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      var o = {
        name: "czh",
        age: 25,
        gender: "male",
      };

      // 简化后的版本
      function defineReactive(target, key, value, enumerable) {
        // 函数内部是一个局部作用域，这个value只在函数内使用的变量
        // 这只是一个简化的版本
        Object.defineProperty(target, key, {
          configurable: true,
          enumberable: !!enumerable,

          get() {
            console.log(`读取 o的${key}属性 `);
            
            return value;
          },
          set(newVal) {
            console.log(`设置 o的${key}属性 `);
            value = newVal;
          },
        });
      }
      //将对象转换为响应式

      let keys = Object.keys(o);
      for (let i = 0; i < keys.length; i++) {
        defineReactive(o, keys[i], o[keys[i]], true);
      }

      // 实际开发中，对象一般是多级的，还需要递归的将每个属性改为响应式
      // 具体处理，请看15
    </script>
  </body>
</html>
